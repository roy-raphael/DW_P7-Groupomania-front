<mat-card class="card-with-dots-button post-card">
    <mat-card-header>
        <mat-card-title>
            <span highlight>{{ { firstName: post.author.firstName, lastName: post.author.surName, pseudo: post.author.pseudo } | username }}</span>
        </mat-card-title>
        <mat-card-subtitle>
            <span>{{ post.createdAt | timeAgo }}</span>
            <span *ngIf="hasBeenEdited"> (derni√®re modification : {{ post.updatedAt | timeAgo }})</span>
        </mat-card-subtitle>
        <button mat-icon-button *ngIf="canEditAndDelete" [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
            <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
            <button mat-menu-item>
            <mat-icon>edit</mat-icon>
            <span>Editer la publication</span>
            </button>
            <button mat-menu-item>
            <mat-icon>delete</mat-icon>
            <span>Supprimer la publication</span>
            </button>
        </mat-menu>
    </mat-card-header>    
    <mat-card-content>
        <img mat-card-image *ngIf="post.imageUrl as imageUrl" [src]="imageUrl" [alt]="post.imageAlt ? post.imageAlt : 'Image du post'">
        <!-- use ngx-ellipsis to apply a text ellipsis (height defined in CSS), and to tell the component if it has been truncated -->
        <!-- use innerText attribute to display correctly special characters (like \n or \r) -->
        <div #ellipsisRef ellipsis (ellipsis-change)="truncated($event)" [ngClass]="{ 'post-content': seeMoreButton }" [innerText]="post.text"></div>
        <span class="see-more-button" *ngIf="seeMoreButton" (click)="showComplete()">Voir plus</span>
        <span class="see-less-button" *ngIf="seeLessButton" (click)="showTruncated()">Voir moins</span>
    </mat-card-content>
    <!-- <mat-card-actions>
        <app-comments [comments]="post.comments" (newComment)="onNewComment($event)"></app-comments>
    </mat-card-actions> -->
</mat-card>